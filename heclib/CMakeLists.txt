file(GLOB_RECURSE F_SRC LIST_DIRECTORIES true heclib_f/src/*.f  heclib_f/src/*.f90)
file(GLOB_RECURSE C_SRC LIST_DIRECTORIES true heclib_c/src/*.c)
include_directories(heclib_c/src/headers)
include_directories(heclib_f/src/headers)
add_library(heclib_c OBJECT  ${C_SRC})
target_link_libraries(heclib_c PRIVATE ZLIB::ZLIB)
add_library(heclib_f OBJECT  ${F_SRC})
target_link_libraries(heclib_f PRIVATE ZLIB::ZLIB)
add_library(heclib $<TARGET_OBJECTS:heclib_c> $<TARGET_OBJECTS:heclib_f>)
target_link_libraries(heclib PRIVATE ZLIB::ZLIB)
target_include_directories(heclib PUBLIC ${CMAKE_CURRENT_LIST_DIR}/heclib_c/src/headers)
if(MSVC)
    set(CMAKE_LINKER_FLAGS "/NODEFAULTLIB:MSVCRT /NODEFAULTLIB:MSVCRTD")
endif()